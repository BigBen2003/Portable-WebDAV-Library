<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Welcome to the Portable WebDAV Library</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="Welcome" /><meta name="Microsoft.Help.Id" content="9861c576-d072-4505-8ad3-aca80a83612f" /><meta name="Description" content="Portable WebDAV Library is a fully RFC 4918http://tools.ietf.org/html/rfc4918 compliant WebDAV client library which is implemented das portable class library (PCL) for use on desktop environments as well as mobile devices." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Portable WebDAV Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="9861c576-d072-4505-8ad3-aca80a83612f.htm" title="Portable WebDAV Library" tocid="roottoc">Portable WebDAV Library</a></div><div class="toclevel1 current" data-toclevel="1"><a data-tochassubtree="false" href="9861c576-d072-4505-8ad3-aca80a83612f.htm" title="Welcome to the Portable WebDAV Library" tocid="9861c576-d072-4505-8ad3-aca80a83612f">Welcome to the Portable WebDAV Library</a></div><div class="toclevel1" data-toclevel="1"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="df5ce5b9-6c59-42e5-bccc-95ad418cc00c.htm" title="Version History" tocid="df5ce5b9-6c59-42e5-bccc-95ad418cc00c">Version History</a></div><div class="toclevel1" data-toclevel="1"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="6c7ed359-f8ac-cdef-fb54-9df85b9aed90.htm" title="DecaTec.WebDav" tocid="6c7ed359-f8ac-cdef-fb54-9df85b9aed90">DecaTec.WebDav</a></div><div class="toclevel1" data-toclevel="1"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="52484c58-28c3-1300-ade4-ac40d6e8b08c.htm" title="DecaTec.WebDav.WebDavArtifacts" tocid="52484c58-28c3-1300-ade4-ac40d6e8b08c">DecaTec.WebDav.WebDavArtifacts</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn">Welcome to the Portable WebDAV Library</td></tr></table><span class="introStyle"></span><div class="introduction"><p>
        Portable WebDAV Library is a fully <a href="http://tools.ietf.org/html/rfc4918" target="_blank">RFC 4918</a> compliant WebDAV client library which is implemented das portable class library (PCL) for use on desktop environments as well as mobile devices.
      </p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Getting Started</span></div><div id="ID1RBSection" class="collapsibleSection"><p>To get started, add a reference to DecaTec.WebDav.dll to your project.</p><p><strong>Important when using this library in a UWP (Windows 10) project</strong></p><p>
          Currently there is a bug in the System.Net.Http.HttpClient which is referenced in UWP projects (<a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/ff66088c-6705-40c0-b839-491b6ed6eb76/uwpwindows-10-bug-in-httpclienthttpwebrequest-when-using-network-credentials?forum=wpdevelop" target="_blank">see MSDN forums</a>). The WebDavClient uses this HttpClient in order to send its WebDAV request which results in the following exception when accessing WebDAV resources:</p><blockquote>
System.Net.Http.HttpRequestException: An error occurred while sending the request. ---&gt; System.NotSupportedException: This IRandomAccessStream does not support the GetInputStreamAt method because it requires cloning and this stream does not support cloning. 
          </blockquote><p>The bug will be solved in a future release of the System.Net.Http assembly. To be able to use the Portable WebDAV Library in a UWP project, you have to add a reference to the pre-release NuGet package 'System.Net.Http':</p><p>Right click on your project in Visual Studio &gt; <em>Manage NuGet Packages...</em> &gt; Browse &gt; Search for 'System.Net.Http' and tick the option <em>Include prerelease</em> &gt; Now install the latest beta version of this package.</p><p><strong>Usage</strong></p><p>See the following code which uses a WebDavSession to retrieve the content of a folder:</p><p>
          There are two levels of abstractions included in this library:
          A low level abstraction (class <strong>WebDavClient</strong>) which supports direct access to a WebDAV server and a higher level of abstraction
          (class <strong>WebDavSession</strong>) which hides most of the direct WebDAV communication and provides an easy access to WebDAV resources.
        </p><p><strong>WebDavSession</strong></p><p>The WebDavSession should be sufficient for most use cases regarding WebDAV access. It provides a high level of abstraction and hides most of the WebDAV 
        specific details (like sending or receiving XML content strings) and supports an easy access to WebDAV servers.</p><p>See the following code which uses a WebDavSession to retrieve the content of a folder:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EA4ABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EA4ABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EA4ABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EA4ABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Specify the user credentials and use it to create a WebDavSession instance.</span>
<span class="highlight-keyword">var</span> credentials = <span class="highlight-keyword">new</span> NetworkCredential(<span class="highlight-literal">"UserName"</span>, <span class="highlight-literal">"MyPassword"</span>);
<span class="highlight-keyword">var</span> webDavSession = <span class="highlight-keyword">new</span> WebDavSession(<span class="highlight-literal">@"http://www.myserver.com/webdav/"</span>, credentials);
<span class="highlight-keyword">var</span> items = <span class="highlight-keyword">await</span> webDavSession.ListAsync(<span class="highlight-literal">@"myfolder/"</span>);

<span class="highlight-keyword">foreach</span> (<span class="highlight-keyword">var</span> item <span class="highlight-keyword">in</span> items)
{
    Console.WriteLine(item.Name);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EA4ABAAA");</script><p><strong>WebDavClient</strong></p><p>
          When the WebDavSession is not sufficient for specific operations, there is also a low level WebDAV access: WebDavClient. This class inherits from System.Net.Http.HttpClient 
          and offers all WebDAV specific operations in the same style as the HttpClient.
          By using WebDavClient, you can use all of the WebDAV operations specified in RFC 4918. The use of WebDavClient is recommended for users who are familiar with the WebDAV speficifaction.
        </p><p>See the following code which uses a WebDavClient to retrieve the content of a folder:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAZABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAZABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAZABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAZABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Specify the user credentials and pass it to a HttpClientHandler.</span>
<span class="highlight-keyword">var</span> credentials = <span class="highlight-keyword">new</span> NetworkCredential(<span class="highlight-literal">"UserName"</span>, <span class="highlight-literal">"MyPassword"</span>);
<span class="highlight-keyword">var</span> httpClientHandler = <span class="highlight-keyword">new</span> HttpClientHandler();
httpClientHandler.Credentials = credentials;
httpClientHandler.PreAuthenticate = <span class="highlight-keyword">true</span>;

<span class="highlight-comment">// Use the HttpClientHandler to create the WebDavClient.</span>
<span class="highlight-keyword">var</span> webDavClient = <span class="highlight-keyword">new</span> WebDavClient(httpClientHandler);

<span class="highlight-comment">// Create a PropFind object with represents a so called allprop request.</span>
PropFind pf = PropFind.CreatePropFindAllProp();
<span class="highlight-keyword">var</span> response = <span class="highlight-keyword">await</span> webDavClient.PropFindAsync(<span class="highlight-literal">@"http://www.myserver.com/webdav/myfolder/"</span>, WebDavDepthHeaderValue.Infinity, pf);

<span class="highlight-comment">// You could also use an XML string directly for use with the WebDavClient.</span>
<span class="highlight-comment">// var xmlString = "&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;D:propfind xmlns:D=\"DAV:\"&gt;&lt;D:allprop /&gt;&lt;/D:propfind&gt;";</span>
<span class="highlight-comment">// var response = await webDavClient.PropFindAsync(@"http://www.myserver.com/webdav/myfolder/", WebDavDepthHeaderValue.Infinity, xmlString);</span>

<span class="highlight-comment">// Use the WebDavResponseContentParser to parse the response message and get a MultiStatus instance (this is also an async method).</span>
<span class="highlight-keyword">var</span> multistatus = <span class="highlight-keyword">await</span> WebDavResponseContentParser.ParseMultistatusResponseContentAsync(response.Content);

<span class="highlight-comment">// Now you can use the MultiStatus object to get access to the items properties.</span>
<span class="highlight-keyword">foreach</span> (<span class="highlight-keyword">var</span> responseItem <span class="highlight-keyword">in</span> multistatus.Response)
{
    Console.WriteLine(responseItem.Href);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAZABAAA");</script><p><strong>Locking</strong></p><p>
          The Portable WebDAV Library also supports WebDAV locking.</p><p>When using a WebDavClient, the locking has to be managed by the calling code, i.e. the handling of lock tokens etc.</p><p>Using a WebDavSession makes WebDAV locking pretty easy, because the WebDavSession handles all the locking mechanism by itself.
          As an example: When the WebDavSession was used to lock a folder, all  subsequent operations affecting the locked file or folder, no lock specific details have to be
          provided (e.g. you do not have to specify a lock token). This is all handled internally in the WebDavSession itself.
        </p><p>For example code demonstrating locking with WebDavClient or WebDavSession, see the documentation of these classes.</p><p /><p><strong>WebDAV object model</strong></p><p>
          Most communication regarding WebDAV is realized with XML strings sent or received in the content of requests or responses. The library contains the WebDAV object 
          model implemented in classes/enums, so there is no need to build up or parse any XML strings directly. Of course you can also use XML strings directly.
        </p><p>As an example: For sending a so called allprop request, you'll need an XML content in the request which looks like this:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAPABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAPABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAPABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;?</span><span class="highlight-xml-tag">xml</span> <span class="highlight-xml-attribute-name">version</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"1.0"</span> <span class="highlight-xml-attribute-name">encoding</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"utf-8"</span><span class="highlight-xml-bracket">?&gt;</span>
<span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">D:propfind</span> <span class="highlight-xml-attribute-name">xmlns:D</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"DAV:"</span><span class="highlight-xml-bracket">&gt;</span>
     <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">D:allprop</span> <span class="highlight-xml-bracket">/&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">D:propfind</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAPABAAA");</script><p>When sending such a WebDAV request, you can simply use the XML string directly:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EANABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EANABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EANABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EANABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> xmlString = <span class="highlight-literal">"&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;...."</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EANABAAA");</script><p>
          All methods which require such an XML string in the request content will accept this XML string.
        </p><p>
          But you can also use the WebDAV object model classes integrated in this library:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAKABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAKABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAKABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAKABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">PropFind pf = PropFind.CreatePropFindAllProp();</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAKABAAA");</script><p>
          This will create an allprop PropFind object which can be directly passed to the corresponding method in the WebDavClient. 
          Many classes of the WebDAV object model contain static methods for creating standard WebDAV request contents. 
          Keep in mind that the WebDAV object model implemented in this library can only be used with the WebDavClient class. When using the WebDavSession class, there is no need to 
          bother about the content of WebDAV requests/responses, thus the WebDAV object model is not needed in this case.
        </p><p /><p><strong>Development</strong></p><p>For development, you will need:</p><ul><li><p>
              Visual Studio 2013 or later
            </p></li><li><p><a href="https://github.com/EWSoftware/SHFB" target="_blank">Sandcastle Help File Builder</a> (for project documentation)
            </p></li></ul><p><strong>Unit tests</strong></p><p>The solution contains unit tests (testing single units of the library), but also unit integration tests, which will test the library against a specific WebDAV 
        server (e.g. a local IIS web server with WebDAV enabled).</p><p><em>Important:</em>
          In order to run the unit integrations tests, information about a speficic WebDAV server have to be provided in a configuration file. This has to be a file named 'TestConfiguration.txt' 
          located in the unit integration test project's output folder (e.g. <em>Portable-WebDAV-Library\UnitTests\DecaTec.WebDav.Test.UnitIntegrationTest\bin\Release</em>). This file has to contain exactly three lines:
        </p><ul class="noBullet"><li><p>
              The user name
            </p></li><li><p>
              The password
            </p></li><li><p>
              The URL of a valid WebDAV server folder
            </p></li></ul><p>If this configuration file is not present, all unit integration tests will fail!</p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="df5ce5b9-6c59-42e5-bccc-95ad418cc00c.htm">Version History</a></div></div></div></div><div id="pageFooter" class="pageFooter" /></body></html>